{
    "title": "PSME Pnc Agent Configuration Schema",
    "description": "Detailed description of the PSME Pnc Agent configuration file.",
    "name": "/",
    "type": "object",
    "properties": {
        "service": {
            "description": "Name of DB entry with service UUID.",
            "name": "service",
            "type": "string"
        },
        "agent": {
            "description": "Container for agent specific information.",
            "name": "agent",
            "type": "object",
            "properties": {
                "vendor": {
                    "description": "Information about agent vendor.",
                    "name": "vendor",
                    "type": "string"
                },
                "capabilities": {
                    "description": "Capabilities of the agent (compute, network, chassis, storage or multiple).",
                    "name": "capabilities",
                    "type": "array",
                    "items" : {
                        "type" : "string"
                    }
                }
            },
            "required": [
                "capabilities"
            ]
        },
        "server": {
            "description": "Information for agent about access to REST server.",
            "name": "server",
            "type": "object",
            "properties": {
                "port": {
                    "description": "Port number to register to REST server. Must be the same as configured in PSME REST Server.",
                    "name": "port",
                    "type": "integer"
                }
            },
            "required": [
                "port"
            ]
        },
        "registration": {
            "description": "Registration to server configuration container.",
            "name": "registration",
            "type": "object",
            "properties": {
                "ipv4": {
                    "description": "PSME REST server IP address or hostname.",
                    "name": "ipv4",
                    "type": "string"
                },
                "port": {
                    "description": "PSME REST server registration port number.",
                    "name": "port",
                    "type": "integer"
                },
                "interval": {
                    "description": "Delay between next registration try in seconds.",
                    "name": "interval",
                    "type": "integer"
                }
            },
            "required": [
                "ipv4",
                "port",
                "interval"
            ]
        },
        "managers": {
            "description": "List of all modules. Each entry represents single module.",
            "name": "modules",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "chassis": {
                        "description": "Configuration for general Pnc during discovery.",
                        "name": "chassis",
                        "type": "object",
                        "properties": {
                            "locationOffset": {
                                "description": "Location identifier offset.",
                                "name": "locationOffset",
                                "type": "integer"
                            },
                            "networkInterface": {
                                "description": "Network interface.",
                                "name": "networkInterface",
                                "type": "string"
                            },
                            "parentId": {
                                "description": "Parent Id.",
                                "name": "parentId",
                                "type": "string"
                            },
                            "platform": {
                                "description": "Platform name",
                                "name": "platform",
                                "type": "string"
                            }
                        },
                        "required": [
                            "locationOffset",
                            "networkInterface",
                            "parentId",
                            "platform"
                        ]
                    },
                    "i2c": {
                        "description":"I2C access interface data.",
                        "name": "i2c",
                        "type": "object",
                        "properties": {
                            "interface": {
                                "description": "Interface used to access I2C: GAS or IPMI.",
                                "name": "interface",
                                "type": "string"
                            },
                            "ipv4": {
                                "description": "IPMI IP address. Required for IPMI interface.",
                                "name": "ipv4",
                                "type": "string"
                            },
                            "username": {
                                "description": "IPMI access username. Required for IPMI interface.",
                                "name": "username",
                                "type": "string"
                            },
                            "password": {
                                "description": "IPMI access password. Required for IPMI interface.",
                                "name": "password",
                                "type": "string"
                            },
                            "port": {
                                "description": "IPMI port. Required for IPMI interface.",
                                "name": "port",
                                "type": "integer"
                            }
                        },
                        "required": [
                            "interface"
                        ]
                    },
                    "PCIePorts": {
                        "description": "PCIePorts connection data.",
                        "name": "PCIePorts",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "PortId": {
                                    "description": "Id of the physical port.",
                                    "name": "PortId",
                                    "type": "string"
                                },
                                "TwiPort": {
                                    "description": "TWI access port for the physical port.",
                                    "name": "TwiPort",
                                    "type": "integer"
                                },
                                "TwiChannel": {
                                    "description": "TWI expander channel used to access the physical port.",
                                    "name": "TwiChannel",
                                    "type": "integer"
                                }
                            }
                        }
                    }
                },
                "required": [
                    "chassis",
                    "PCIePorts",
                    "i2c"
                ]
            }
        },
        "fabric-discovery-mode": {
            "description": "Mode of discovery of Endpoints and Zones during discovery. \"AUTOMATIC\" - create Initiator Endpoints and Zones for every Upstream Port on PCIe Switch and Target Endpoints for every connected device. Information about Zones without Initiator Endpoints and about changes in physical connections during downtime is lost.\n\"DATABASE\" - Restore state of Endpoints and Zones from database.",
            "name": "fabric-discovery-mode",
            "type": "string",
            "enum" : [
                "DATABASE",
                "AUTOMATIC"
            ]
        },
        "loggers": {
            "description": "Logger configuration.",
            "name": "loggers",
            "type": "array",
            "items": {
                "description": "Settings of a specific logger.",
                "type": "object",
                "properties": {
                    "name": {
                        "description": "Set the name of the logger.",
                        "name": "name",
                        "type": "string"
                    },
                    "default": {
                        "description": "Set the logger as default. Only one can be default.",
                        "name": "default",
                        "type": "boolean"
                    },
                    "level": {
                        "description": "Choose severity level compatible with syslog.",
                        "name": "level",
                        "type": "string"
                    },
                    "timeformat": {
                        "description": "Define format used for timestamps in log file.",
                        "name": "timeformat",
                        "type": "string"
                    },
                    "color": {
                        "description": "Enable or disable colors in log file.",
                        "name": "color",
                        "type": "boolean"
                    },
                    "output": {
                        "description": "Turn on, off logging.",
                        "name": "output",
                        "type": "boolean"
                    },
                    "tagging": {
                        "description": "Turn on/turn off tagging in application.",
                        "name": "tagging",
                        "type": "boolean"
                    },
                    "moredebug": {
                        "description": "Enable/disable additional debug info in log file.",
                        "name": "moredebug",
                        "type": "boolean"
                    },
                    "streams": {
                        "description": "Configuration of output methods for logger.",
                        "name": "streams",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "type": {
                                    "description": "Choose one of the output methods. Like FILE of STDOUT.",
                                    "name": "type",
                                    "type": "string"
                                },
                                "file": {
                                    "description": "Path to the file, if stream type is set to FILE.",
                                    "name": "file",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "type"
                            ]
                        }
                    }
                }
            }
        }
    },
    "required": [
        "service",
        "agent",
        "server",
        "registration",
        "fabric-discovery-mode",
        "loggers"
    ]
}
